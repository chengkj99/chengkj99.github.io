<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">

    

    
    <title>å¦‚ä½•å†™ä¸€ä¸ª babel pluginã€ç¿»è¯‘ã€‘ | ç¨‹æ˜¯ésky</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="æŠ€æœ¯">
    
    <meta name="description" content="ä»€ä¹ˆæ˜¯ babelbabel æ˜¯ javascript ç¼–è¯‘å™¨ï¼Œå®ƒå¯ä»¥å°† ECMAScript 2015+ ä»£ç è½¬æ¢æˆæµè§ˆå™¨å¯è§£æçš„å…¼å®¹æ€§ä»£ç ã€‚ babel æ˜¯åŸºäº plugin system  è¿›è¡Œä»£ç è½¬æ¢çš„ï¼Œé€šè¿‡ babel æ¯ä¸ªäººéƒ½å¯ä»¥å†™è‡ªå·±çš„ babel pluginã€‚  ä»€ä¹ˆæ˜¯æŠ½è±¡è¯­æ³•æ ‘ Abstract Syntax Tree (AST)AST (Abstract syntax t">
<meta name="keywords" content="æŠ€æœ¯">
<meta property="og:type" content="article">
<meta property="og:title" content="å¦‚ä½•å†™ä¸€ä¸ª babel pluginã€ç¿»è¯‘ã€‘">
<meta property="og:url" content="http://www.chengkangjian.com/2020/10/23/How-to-write-a-babel-plugin/index.html">
<meta property="og:site_name" content="ç¨‹æ˜¯ésky">
<meta property="og:description" content="ä»€ä¹ˆæ˜¯ babelbabel æ˜¯ javascript ç¼–è¯‘å™¨ï¼Œå®ƒå¯ä»¥å°† ECMAScript 2015+ ä»£ç è½¬æ¢æˆæµè§ˆå™¨å¯è§£æçš„å…¼å®¹æ€§ä»£ç ã€‚ babel æ˜¯åŸºäº plugin system  è¿›è¡Œä»£ç è½¬æ¢çš„ï¼Œé€šè¿‡ babel æ¯ä¸ªäººéƒ½å¯ä»¥å†™è‡ªå·±çš„ babel pluginã€‚  ä»€ä¹ˆæ˜¯æŠ½è±¡è¯­æ³•æ ‘ Abstract Syntax Tree (AST)AST (Abstract syntax t">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://ckj-bucket.oss-cn-beijing.aliyuncs.com/chengkj-blog/tree.jpg">
<meta property="og:updated_time" content="2020-10-23T09:44:05.908Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="å¦‚ä½•å†™ä¸€ä¸ª babel pluginã€ç¿»è¯‘ã€‘">
<meta name="twitter:description" content="ä»€ä¹ˆæ˜¯ babelbabel æ˜¯ javascript ç¼–è¯‘å™¨ï¼Œå®ƒå¯ä»¥å°† ECMAScript 2015+ ä»£ç è½¬æ¢æˆæµè§ˆå™¨å¯è§£æçš„å…¼å®¹æ€§ä»£ç ã€‚ babel æ˜¯åŸºäº plugin system  è¿›è¡Œä»£ç è½¬æ¢çš„ï¼Œé€šè¿‡ babel æ¯ä¸ªäººéƒ½å¯ä»¥å†™è‡ªå·±çš„ babel pluginã€‚  ä»€ä¹ˆæ˜¯æŠ½è±¡è¯­æ³•æ ‘ Abstract Syntax Tree (AST)AST (Abstract syntax t">
<meta name="twitter:image" content="https://ckj-bucket.oss-cn-beijing.aliyuncs.com/chengkj-blog/tree.jpg">
    

    

    
        <link rel="icon" href="http://ckj-bucket.oss-cn-beijing.aliyuncs.com/chengkj-blog/cheng.png">
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/3.3.1/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-93092041-1', 'auto');
ga('send', 'pageview');

</script>

    
    


</head>
</html>
<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">ä½†è¡Œå¥½äº‹ è«é—®å‰ç¨‹</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item">
                                    <a class="main-nav-list-link" href="/">ä¸»é¡µ</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/å·¥ä½œ/">å·¥ä½œ</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/æƒ³æ³•/">æƒ³æ³•</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/æŠ€æœ¯/">æŠ€æœ¯</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/ç”Ÿæ´»/">ç”Ÿæ´»</a></li></ul>
                                    
                                <li class="main-nav-list-item">
                                    <a class="main-nav-list-link" href="/about/index.html">å…³äº</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="æœç´¢">
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'æ–‡ç« ',
            PAGES: 'é¡µé¢',
            CATEGORIES: 'åˆ†ç±»',
            TAGS: 'æ ‡ç­¾',
            UNTITLED: '(æœªå‘½å)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/æŠ€æœ¯/">æŠ€æœ¯</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-How-to-write-a-babel-plugin" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        å¦‚ä½•å†™ä¸€ä¸ª babel pluginã€ç¿»è¯‘ã€‘
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
    <div class="article-date">
        <a href="/2020/10/23/How-to-write-a-babel-plugin/" class="article-date">
            <time datetime="2020-10-23T09:28:42.000Z" itemprop="datePublished">2020-10-23</time>
        </a>
    </div>

		

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/æŠ€æœ¯/">æŠ€æœ¯</a>
    </div>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <!-- categories:
 home(ä¸»é¡µ)ï¼šæƒ³åœ¨ä¸»é¡µè¿›è¡Œå±•ç¤ºçš„
 idea(æƒ³æ³•): è®°å½•è‡ªå·±çš„æƒ³æ³•ï¼Œä¸€å¥ä¸¤å¥éƒ½å¯ä»¥
 technology(æŠ€æœ¯)ï¼šè®°å½•æŠ€æœ¯çš„æ€è€ƒï¼Œæ€»ç»“
 life(ç”Ÿæ´»)ï¼šè®°å½•ç”Ÿæ´»æ–¹é¢çš„æ€è€ƒ
-->
<p><a name="lr9ck"></a></p>
<h2 id="ä»€ä¹ˆæ˜¯-babel"><a href="#ä»€ä¹ˆæ˜¯-babel" class="headerlink" title="ä»€ä¹ˆæ˜¯ babel"></a><a href="https://lihautan.com/step-by-step-guide-for-writing-a-babel-transformation/#what-is-babel" target="_blank" rel="noopener">ä»€ä¹ˆæ˜¯ babel</a></h2><p>babel æ˜¯ javascript ç¼–è¯‘å™¨ï¼Œå®ƒå¯ä»¥å°† ECMAScript 2015+ ä»£ç è½¬æ¢æˆæµè§ˆå™¨å¯è§£æçš„å…¼å®¹æ€§ä»£ç ã€‚</p>
<p>babel æ˜¯åŸºäº <a href="https://babeljs.io/docs/en/plugins" target="_blank" rel="noopener">plugin system</a>  è¿›è¡Œä»£ç è½¬æ¢çš„ï¼Œé€šè¿‡ babel æ¯ä¸ªäººéƒ½å¯ä»¥å†™è‡ªå·±çš„ babel pluginã€‚<br></p>
<p><a name="j2yw7"></a></p>
<h3 id="ä»€ä¹ˆæ˜¯æŠ½è±¡è¯­æ³•æ ‘-Abstract-Syntax-Tree-AST"><a href="#ä»€ä¹ˆæ˜¯æŠ½è±¡è¯­æ³•æ ‘-Abstract-Syntax-Tree-AST" class="headerlink" title="ä»€ä¹ˆæ˜¯æŠ½è±¡è¯­æ³•æ ‘ Abstract Syntax Tree (AST)"></a><a href="https://lihautan.com/step-by-step-guide-for-writing-a-babel-transformation/#what-is-abstract-syntax-tree-ast" target="_blank" rel="noopener">ä»€ä¹ˆæ˜¯æŠ½è±¡è¯­æ³•æ ‘ Abstract Syntax Tree (AST)</a></h3><p><br>AST (Abstract syntax tree, æŠ½è±¡è¯­æ³•æ ‘) çš„å­¦ä¹ èµ„æ–™ï¼š</p>
<ul>
<li><a href="https://medium.com/basecs/leveling-up-ones-parsing-game-with-asts-d7a6fc2400ff" target="_blank" rel="noopener">Leveling Up Oneâ€™s Parsing Game With ASTs</a> by <a href="https://twitter.com/vaidehijoshi" target="_blank" rel="noopener">Vaidehi Joshi</a> * <em>(Highly recommend this one! ğŸ‘)</em></li>
<li>Wikipediaâ€™s <a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree" target="_blank" rel="noopener">Abstract syntax tree</a></li>
<li><a href="https://blog.bitsrc.io/what-is-an-abstract-syntax-tree-7502b71bde27" target="_blank" rel="noopener">What is an Abstract Syntax Tree</a> by <a href="https://twitter.com/ngArchangel" target="_blank" rel="noopener">Chidume Nnamdi</a></li>
</ul>
<p><br>ç®€å•è¯´æ¥ï¼šAST æ˜¯ä»£ç çš„æ ‘å½¢è¡¨ç¤ºï¼Œè¯¥æ ‘å½¢è¡¨ç¤ºéµå¾ª <a href="https://github.com/estree/estree" target="_blank" rel="noopener">estree specification</a> è§„èŒƒã€‚<br><br><br>AST èƒ½è¡¨ç¤ºä»£ç çš„ç»“æ„å’Œå«ä¹‰ï¼Œæ‰€ä»¥ä»–å…è®¸åƒ <a href="https://babeljs.io/" target="_blank" rel="noopener">babel</a> è¿™æ ·çš„ç¼–è¯‘å™¨å»ç†è§£å’Œè½¬æ¢å®ƒã€‚<br><a name="85g36"></a></p>
<h2 id="å¦‚ä½•ä½¿ç”¨-babel-è½¬æ¢ä»£ç "><a href="#å¦‚ä½•ä½¿ç”¨-babel-è½¬æ¢ä»£ç " class="headerlink" title="å¦‚ä½•ä½¿ç”¨ babel è½¬æ¢ä»£ç "></a><a href="https://lihautan.com/step-by-step-guide-for-writing-a-babel-transformation/#how-to-use-babel-to-transform-code" target="_blank" rel="noopener">å¦‚ä½•ä½¿ç”¨ babel è½¬æ¢ä»£ç </a></h2><p><br>ä»¥ä¸‹æ˜¯ä½¿ç”¨ babel è¿›è¡Œä»£ç è½¬æ¢çš„å¸¸è§„æ¨¡æ¿ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; parse &#125; <span class="keyword">from</span> <span class="string">'@babel/parser'</span>;</span><br><span class="line"><span class="keyword">import</span> traverse <span class="keyword">from</span> <span class="string">'@babel/traverse'</span>;</span><br><span class="line"><span class="keyword">import</span> generate <span class="keyword">from</span> <span class="string">'@babel/generator'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> code = <span class="string">'const n = 1'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// parse the code -&gt; ast</span></span><br><span class="line"><span class="keyword">const</span> ast = parse(code);</span><br><span class="line"></span><br><span class="line"><span class="comment">// transform the ast</span></span><br><span class="line">traverse(ast, &#123;</span><br><span class="line">  enter(path) &#123;</span><br><span class="line">    <span class="comment">// in this example change all the variable `n` to `x`</span></span><br><span class="line">    <span class="keyword">if</span> (path.isIdentifier(&#123; <span class="attr">name</span>: <span class="string">'n'</span> &#125;)) &#123;</span><br><span class="line">      path.node.name = <span class="string">'x'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// generate code &lt;- ast</span></span><br><span class="line"><span class="keyword">const</span> output = generate(ast, code);</span><br><span class="line"><span class="built_in">console</span>.log(output.code); <span class="comment">// 'const x = 1;'</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½ éœ€è¦å®‰è£… <a href="https://www.npmjs.com/package/@babel/core" target="_blank" rel="noopener">@babel/core</a> è¿è¡Œæ­¤ç¨‹åºï¼Œ <code>@babel/parser</code>, <code>@babel/traverse</code>, <code>@babel/generator</code> éƒ½ä¾èµ– <code>@babel/core</code>, æ‰€ä»¥å®‰è£… <code>@babel/core</code> å°±å¯ä»¥äº†.</p>
</blockquote>
<p><br>ä¸€èˆ¬æµç¨‹æ˜¯ï¼Œå°†ä»£ç è§£æä¸º ASTï¼Œè½¬æ¢ ASTï¼Œç„¶åä»è½¬æ¢åçš„ AST ç”Ÿæˆä»£ç ã€‚</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">code -&gt; AST -&gt; transformed AST -&gt; transformed code</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ babel çš„ API å®Œæˆä¸Šè¿°æ“ä½œï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> babel <span class="keyword">from</span> <span class="string">'@babel/core'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> code = <span class="string">'const n = 1'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> output = babel.transformSync(code, &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="comment">// your first babel plugin ğŸ˜ğŸ˜</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">myCustomPlugin</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        visitor: &#123;</span><br><span class="line">          Identifier(path) &#123;</span><br><span class="line">            <span class="comment">// in this example change all the variable `n` to `x`</span></span><br><span class="line">            <span class="keyword">if</span> (path.isIdentifier(&#123; <span class="attr">name</span>: <span class="string">'n'</span> &#125;)) &#123;</span><br><span class="line">              path.node.name = <span class="string">'x'</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(output.code); <span class="comment">// 'const x = 1;'</span></span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œä½ å·²ç»ç¼–å†™äº†ç¬¬ä¸€ä¸ª babel transform pluginï¼Œå°†æ‰€æœ‰çš„å˜é‡ n è½¬æ¢æˆäº† xï¼Œæ˜¯ä¸æ˜¯å¾ˆ cool.<br></p>
<blockquote>
<p>å°†å‡½æ•° myCustomPlugin æå–åˆ°å¦ä¸€ä¸ªæ–‡ä»¶å¹¶å¯¼å‡ºã€‚æ‰“åŒ…å¹¶ä»¥ <a href="https://medium.com/@bretcameron/how-to-publish-your-first-npm-package-b224296fc57b" target="_blank" rel="noopener">npm æ‰“åŒ…å½¢å¼å‘å¸ƒæ–‡ä»¶</a>ï¼Œæ‚¨å¯ä»¥è‡ªè±ªåœ°è¯´æ‚¨å·²ç»å‘å¸ƒäº† babel æ’ä»¶ï¼ ğŸ‰ğŸ‰</p>
</blockquote>
<p><br>æœ‰ä¸€ç‚¹ä½ éœ€è¦çŸ¥é“ï¼šâ€œæ˜¯çš„ï¼Œæˆ‘åˆšåˆšç¼–å†™äº† babel æ’ä»¶ï¼Œä½†æ˜¯æˆ‘ä¸çŸ¥é“å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„â€¦â€¦â€ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒï¼Œè®©æˆ‘ä»¬æ·±å…¥äº†è§£å¦‚ä½•è‡ªå·±ç¼–å†™ babel è½¬æ¢æ’ä»¶ã€‚ <br><br><br>ä¸‹é¢æ˜¯æ‰§è¡Œæ­¤æ“ä½œçš„åˆ†æ­¥æŒ‡å—ï¼š<br></p>
<p><a name="tpJBI"></a></p>
<h3 id="ææ¸…æ¥šä½ è¦å°†ç°åœ¨çš„ä»£ç è½¬æ¢æˆä»€ä¹ˆæ ·å­"><a href="#ææ¸…æ¥šä½ è¦å°†ç°åœ¨çš„ä»£ç è½¬æ¢æˆä»€ä¹ˆæ ·å­" class="headerlink" title="ææ¸…æ¥šä½ è¦å°†ç°åœ¨çš„ä»£ç è½¬æ¢æˆä»€ä¹ˆæ ·å­"></a><a href="https://lihautan.com/step-by-step-guide-for-writing-a-babel-transformation/#have-in-mind-what-you-want-to-transform-from-and-transform-into" target="_blank" rel="noopener">ææ¸…æ¥šä½ è¦å°†ç°åœ¨çš„ä»£ç è½¬æ¢æˆä»€ä¹ˆæ ·å­</a></h3><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘æƒ³æ¶æä¸€ä¸‹æˆ‘çš„åŒäº‹ï¼š</p>
<ul>
<li>åè½¬æ‰€æœ‰çš„å˜é‡å’Œå‡½æ•°å</li>
<li>å°†å­—ç¬¦ä¸²åˆ†éš”æˆå•ä¸ªå­—ç¬¦</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greet</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'Hello '</span> + name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(greet(<span class="string">'tanhauhau'</span>)); <span class="comment">// Hello tanhauhau</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// transform into</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">teerg</span>(<span class="params">eman</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'H'</span> + <span class="string">'e'</span> + <span class="string">'l'</span> + <span class="string">'l'</span> + <span class="string">'o'</span> + <span class="string">' '</span> + eman;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(teerg(<span class="string">'t'</span> + <span class="string">'a'</span> + <span class="string">'n'</span> + <span class="string">'h'</span> + <span class="string">'a'</span> + <span class="string">'u'</span> + <span class="string">'h'</span> + <span class="string">'a'</span> + <span class="string">'u'</span>)); <span class="comment">// Hello tanhauhau</span></span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬å¿…é¡»ä¿ç•™ console.log ä»¥ä¿è¯ä»£ç çš„æ­£å¸¸å·¥ä½œã€‚<br></p>
<p><a name="a75d438a"></a></p>
<h3 id="ææ¸…æ¥šä»£ç è½¬æ¢å‰çš„-AST"><a href="#ææ¸…æ¥šä»£ç è½¬æ¢å‰çš„-AST" class="headerlink" title="ææ¸…æ¥šä»£ç è½¬æ¢å‰çš„ AST"></a><a href="https://lihautan.com/step-by-step-guide-for-writing-a-babel-transformation/#know-what-to-target-on-the-ast" target="_blank" rel="noopener">ææ¸…æ¥šä»£ç è½¬æ¢å‰çš„ AST</a></h3><p>è¿›å…¥ <a href="https://lihautan.com/babel-ast-explorer/#?eyJiYWJlbFNldHRpbmdzIjp7InZlcnNpb24iOiI3LjQuNSJ9LCJ0cmVlU2V0dGluZ3MiOnsiaGlkZUVtcHR5Ijp0cnVlLCJoaWRlTG9jYXRpb24iOnRydWUsImhpZGVUeXBlIjp0cnVlfSwiY29kZSI6ImZ1bmN0aW9uIGdyZWV0KG5hbWUpIHtcbiAgcmV0dXJuICdIZWxsbyAnICsgbmFtZTtcbn1cblxuY29uc29sZS5sb2coZ3JlZXQoJ3RhbmhhdWhhdScpKTsgLy8gSGVsbG8gdGFuaGF1aGF1In0=" target="_blank" rel="noopener">babel AST explorer</a>ï¼Œå•å‡»ä»£ç çš„ä¸åŒéƒ¨åˆ†ï¼Œç„¶åæŸ¥çœ‹ AST ä¸­çš„ä½ç½®/è¡¨ç¤ºæ–¹å¼ã€‚<br><img src="https://cdn.nlark.com/yuque/0/2020/png/201757/1603358880254-acd5aa06-ded5-4622-82f0-7e7903180bf1.png#align=left&amp;display=inline&amp;height=548&amp;margin=%5Bobject%20Object%5D&amp;name=%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202020-10-22%20%E4%B8%8B%E5%8D%885.27.40.png&amp;originHeight=548&amp;originWidth=1915&amp;size=77640&amp;status=done&amp;style=none&amp;width=1915" alt="å±å¹•å¿«ç…§ 2020-10-22 ä¸‹åˆ5.27.40.png"><br><br><br>å¦‚æœè¿™æ˜¯æ‚¨ç¬¬ä¸€æ¬¡çœ‹åˆ° ASTï¼Œå…ˆäº†è§£ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ï¼Œå¹¶æ ¹æ®ä»£ç äº†è§£ AST ä¸Šçš„èŠ‚ç‚¹åç§°ã€‚<br><br><br>æ‰€ä»¥ï¼Œæˆ‘ä»¬ç°åœ¨æ ¹æ®é€‰æ‹©ä¸åŒçš„ä»£ç å¯ä»¥çŸ¥é“ï¼š</p>
<ul>
<li><strong>Identifierï¼šæ ‡è¯†ç ï¼Œè¡¨ç¤ºå˜é‡å’Œå‡½æ•°å </strong></li>
<li><strong>StringLiteralï¼šå­—ç¬¦ä¸²å­—é¢é‡ï¼Œè¡¨ç¤ºå­—ç¬¦ä¸²</strong><br><a name="O0Q1n"></a></li>
</ul>
<h3 id="ææ¸…æ¥šä»£ç è½¬æ¢åçš„-AST-çš„æ ·å­"><a href="#ææ¸…æ¥šä»£ç è½¬æ¢åçš„-AST-çš„æ ·å­" class="headerlink" title="ææ¸…æ¥šä»£ç è½¬æ¢åçš„ AST çš„æ ·å­"></a><a href="https://lihautan.com/step-by-step-guide-for-writing-a-babel-transformation/#know-how-the-transformed-ast-looks-like" target="_blank" rel="noopener">ææ¸…æ¥šä»£ç è½¬æ¢åçš„ AST çš„æ ·å­</a></h3><p><img src="https://cdn.nlark.com/yuque/0/2020/png/201757/1603440596604-32baa3f5-802c-442b-9351-8af83a81a0fa.png#align=left&amp;display=inline&amp;height=543&amp;margin=%5Bobject%20Object%5D&amp;name=%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202020-10-23%20%E4%B8%8B%E5%8D%884.09.43.png&amp;originHeight=543&amp;originWidth=1919&amp;size=84972&amp;status=done&amp;style=none&amp;width=1919" alt="å±å¹•å¿«ç…§ 2020-10-23 ä¸‹åˆ4.09.43.png"><br><br><br>å†æ¬¡è¿›å…¥ <a href="https://lihautan.com/babel-ast-explorer/#?eyJiYWJlbFNldHRpbmdzIjp7InZlcnNpb24iOiI3LjQuNSJ9LCJ0cmVlU2V0dGluZ3MiOnsiaGlkZUVtcHR5Ijp0cnVlLCJoaWRlTG9jYXRpb24iOnRydWUsImhpZGVUeXBlIjp0cnVlLCJoaWRlQ29tbWVudHMiOnRydWV9LCJjb2RlIjoiZnVuY3Rpb24gdGVlcmcoZW1hbikge1xuICByZXR1cm4gXCJIXCIgKyBcImVcIiArIFwibFwiICsgXCJsXCIgKyBcIm9cIiArIFwiIFwiICsgZW1hbjtcbn1cblxuY29uc29sZS5sb2codGVlcmcoXCJ0XCIgKyBcImFcIiArIFwiblwiICsgXCJoXCIgKyBcImFcIiArIFwidVwiICsgXCJoXCIgKyBcImFcIiArIFwidVwiKSk7IC8vIEhlbGxvIHRhbmhhdWhhdVxuIn0=" target="_blank" rel="noopener">babel AST explorer</a>ï¼Œä½†æ˜¯è¿™æ¬¡æµè§ˆä½ æƒ³è¦ç”Ÿæˆçš„ä»£ç ï¼Œæ€è€ƒå’Œç†è§£è½¬æ¢å‰çš„ AST å’Œè½¬æ¢åçš„ AST çš„ä»£ç ä¹‹é—´çš„åŒºåˆ«ã€‚<br>ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°â€™Hâ€™+â€™eâ€™+â€™lâ€™+â€™lâ€™+â€™oâ€™+â€™â€™+ eman ç”±åµŒå¥—çš„ BinaryExpression ä¸ StringLiteral ç»„æˆã€‚<br></p>
<p><a name="KIi4B"></a></p>
<h3 id="å†™ä»£ç "><a href="#å†™ä»£ç " class="headerlink" title="å†™ä»£ç "></a><a href="https://lihautan.com/step-by-step-guide-for-writing-a-babel-transformation/#write-code" target="_blank" rel="noopener">å†™ä»£ç </a></h3><p>ç°åœ¨çœ‹çœ‹æˆ‘ä»¬çš„ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myCustomPlugin</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    visitor: &#123;</span><br><span class="line">      Identifier(path) &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ª transformation ä½¿ç”¨çš„æ˜¯ <a href="https://en.wikipedia.org/wiki/Visitor_pattern" target="_blank" rel="noopener">the visitor pattern (è®¿é—®è€…æ¨¡å¼)</a>.<br><br><br>åœ¨éå†é˜¶æ®µï¼Œbabel å°†ä½¿ç”¨ <a href="https://en.wikipedia.org/wiki/Depth-first_search" target="_blank" rel="noopener">depth-first search traversal ï¼ˆæ·±åº¦ä¼˜å…ˆéå†ï¼‰</a>è®¿é—®æ¯ä¸€ä¸ª AST çš„èŠ‚ç‚¹ï¼Œä½ å¯ä»¥åœ¨ visitor ä¸­æŒ‡å®šå›è°ƒæ–¹æ³•ï¼Œè¿™æ ·å½“è®¿é—®è¿™ä¸ªèŠ‚ç‚¹æ—¶ï¼Œbabel å°†ä½¿ç”¨å½“å‰æ­£åœ¨è®¿é—®çš„èŠ‚ç‚¹è°ƒç”¨è¯¥æ–¹æ³•ã€‚<br><br><br>åœ¨ visitor å¯¹è±¡ä¸­ï¼Œå¯ä»¥æŒ‡å®šèŠ‚ç‚¹åç§°ä½œä¸ºå›è°ƒæ–¹æ³•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myCustomPlugin</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    visitor: &#123;</span><br><span class="line">      Identifier(path) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'identifier'</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">      StringLiteral(path) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'string literal'</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä»¥ä¸Šä»£ç ï¼Œæ¯å½“ babel é‡åˆ°å¯¹åº”çš„èŠ‚ç‚¹æ—¶ï¼Œéƒ½ä¼šçœ‹åˆ°â€œ stringliteralâ€å’Œâ€œ identifierâ€è¢«è°ƒç”¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">identifier</span><br><span class="line">identifier</span><br><span class="line">string literal</span><br><span class="line">identifier</span><br><span class="line">identifier</span><br><span class="line">identifier</span><br><span class="line">identifier</span><br><span class="line">string literal</span><br></pre></td></tr></table></figure>
<p>åœ¨ç»§ç»­ä¹‹å‰ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ <code>Identiferï¼ˆpathï¼‰{}</code>  çš„å‚æ•°ã€‚å®ƒçš„å‚æ•°æ˜¯è·¯å¾„è€Œä¸æ˜¯èŠ‚ç‚¹ï¼Œè·¯å¾„å’ŒèŠ‚ç‚¹ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>åœ¨ babel ä¸­ï¼Œpath æ˜¯ node ä¸Šçš„æŠ½è±¡ï¼Œå®ƒèƒ½è¡¨ç¤ºèŠ‚ç‚¹ä¹‹é—´çš„é“¾æ¥ï¼Œæ¯”å¦‚ï¼šé€šè¿‡çˆ¶èŠ‚ç‚¹å¯ä»¥æ‰¾åˆ°å­èŠ‚ç‚¹ç­‰ç­‰ï¼Œå®ƒè¿˜èƒ½ä»£è¡¨ <strong>scope</strong> <strong>åŸŸã€context ä¸Šä¸‹æ–‡</strong>ç­‰ä¿¡æ¯ï¼Œæ­¤å¤– path æä¾›äº† <code>replaceWith</code>, <code>insertBefore</code>, <code>remove</code> ç­‰æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•çš„æ“ä½œå°†æ›´æ–° AST ä¸­å¯¹åº”çš„èŠ‚ç‚¹ã€‚<br></p>
<blockquote>
<p>_You can read more detail about <em><code>path</code></em> in <em><a href="https://jamie.build/" target="_blank" rel="noopener">Jamie Kyle</a></em>â€˜s _<a href="https://github.com/jamiebuilds/babel-handbook/blob/master/translations/en/plugin-handbook.md#paths" target="_blank" rel="noopener">babel handbook</a></p>
</blockquote>
<p><br>ç°åœ¨ï¼Œæˆ‘ä»¬ç»§ç»­å†™ babel plugin.<br></p>
<p><a name="YWw4E"></a></p>
<h4 id="è½¬æ¢å˜é‡å"><a href="#è½¬æ¢å˜é‡å" class="headerlink" title="è½¬æ¢å˜é‡å"></a><a href="https://lihautan.com/step-by-step-guide-for-writing-a-babel-transformation/#transforming-variable-name" target="_blank" rel="noopener">è½¬æ¢å˜é‡å</a></h4><p><br>ä» <a href="https://lihautan.com/babel-ast-explorer/#?eyJiYWJlbFNldHRpbmdzIjp7InZlcnNpb24iOiI3LjQuNSJ9LCJ0cmVlU2V0dGluZ3MiOnsiaGlkZUVtcHR5Ijp0cnVlLCJoaWRlTG9jYXRpb24iOnRydWUsImhpZGVUeXBlIjp0cnVlLCJoaWRlQ29tbWVudHMiOnRydWV9LCJjb2RlIjoiZnVuY3Rpb24gZ3JlZXQobmFtZSkge1xuICByZXR1cm4gJ0hlbGxvICcgKyBuYW1lO1xufVxuXG5jb25zb2xlLmxvZyhncmVldCgndGFuaGF1aGF1JykpOyAvLyBIZWxsbyB0YW5oYXVoYXUifQ==" target="_blank" rel="noopener">AST æµè§ˆå™¨</a> ä¸­å¯ä»¥çœ‹åˆ°ï¼Œ<strong>Identifier</strong> çš„åç§°å­˜å‚¨åœ¨åä¸º name çš„å±æ€§ä¸­ï¼Œå› æ­¤æˆ‘ä»¬è¦åšçš„å°±æ˜¯åè½¬åç§°ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Identifier(path) &#123;</span><br><span class="line">  path.node.name = path.node.name</span><br><span class="line">    .split(<span class="string">''</span>)</span><br><span class="line">    .reverse()</span><br><span class="line">    .join(<span class="string">''</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œå®ƒï¼Œæˆ‘ä»¬å°†çœ‹åˆ°ï¼š<br></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">teerg</span>(<span class="params">eman</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'Hello '</span> + eman;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">elosnoc.gol(teerg(<span class="string">'tanhauhau'</span>)); <span class="comment">// Hello tanhauhau</span></span><br></pre></td></tr></table></figure>
<p>å¿«è¦è¾¾åˆ°ç›®æ ‡äº†, æˆ‘ä»¬ç°åœ¨ä¸å°å¿ƒæŠŠ <code>console.log</code> ä¹Ÿç»™ç¿»è½¬äº†ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆé¿å…å‘¢?<br><br><br>æˆ‘ä»¬å†çœ‹ä¸‹ <a href="https://lihautan.com/babel-ast-explorer/#?eyJiYWJlbFNldHRpbmdzIjp7InZlcnNpb24iOiI3LjQuNSJ9LCJ0cmVlU2V0dGluZ3MiOnsiaGlkZUVtcHR5Ijp0cnVlLCJoaWRlTG9jYXRpb24iOnRydWUsImhpZGVUeXBlIjp0cnVlLCJoaWRlQ29tbWVudHMiOnRydWV9LCJjb2RlIjoiZnVuY3Rpb24gZ3JlZXQobmFtZSkge1xuICByZXR1cm4gJ0hlbGxvICcgKyBuYW1lO1xufVxuXG5jb25zb2xlLmxvZyhncmVldCgndGFuaGF1aGF1JykpOyAvLyBIZWxsbyB0YW5oYXVoYXUifQ==" target="_blank" rel="noopener">AST æµè§ˆå™¨</a>ï¼Œconsole.log æ˜¯ MemberExpression çš„ä¸€éƒ¨åˆ†ï¼Œå¯¹è±¡ä¸º â€œconsoleâ€ï¼Œå±æ€§ä¸º â€œlogâ€ï¼Œå› æ­¤ï¼Œè®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹æˆ‘ä»¬å½“å‰çš„ <strong>Identifier</strong> æ˜¯å¦åœ¨æ­¤ MemberExpression å†…ï¼Œå¦‚æœåœ¨çš„è¯æˆ‘ä»¬ä¸å»åè½¬å®ƒï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Identifier(path) &#123;</span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    !(</span><br><span class="line">      path.parentPath.isMemberExpression() &amp;&amp;</span><br><span class="line">      path.parentPath</span><br><span class="line">        .get(<span class="string">'object'</span>)</span><br><span class="line">        .isIdentifier(&#123; <span class="attr">name</span>: <span class="string">'console'</span> &#125;) &amp;&amp;</span><br><span class="line">      path.parentPath.get(<span class="string">'property'</span>).isIdentifier(&#123; <span class="attr">name</span>: <span class="string">'log'</span> &#125;)</span><br><span class="line">    )</span><br><span class="line">  ) &#123;</span><br><span class="line">   path.node.name = path.node.name</span><br><span class="line">     .split(<span class="string">''</span>)</span><br><span class="line">     .reverse()</span><br><span class="line">     .join(<span class="string">''</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨æ­£ç¡®äº†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">teerg</span>(<span class="params">eman</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'Hello '</span> + eman;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(teerg(<span class="string">'tanhauhau'</span>)); <span class="comment">// Hello tanhauhau</span></span><br></pre></td></tr></table></figure>
<p>æ­¤å¤–ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¦å¯¹ <code>Identifier</code> çš„çˆ¶èŠ‚ç‚¹ <code>MemberExpression</code>  è¿›è¡Œå¯¹æ¯”ï¼Œè€Œä¸æ˜¯ç›´æ¥å¯¹æ¯” <code>Identifier.name === &#39;console&#39; || Identifier.name === &#39;log&#39;</code>  å³å¯ï¼Ÿ<br><br><br>å¦‚æœç›´æ¥å¯¹æ¯” <code>Identifier.name</code>  çš„è¯ï¼Œå°†æ¼æ‰æˆ‘ä»¬å†™ä»£ç æ—¶çš„å˜é‡åä¸º log çš„è¯­å¥ï¼š<br></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> log = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æˆ‘ä»¬æ˜¯æ€ä¹ˆçŸ¥é“ <code>isMemberExpression</code>_ and _<code>isIdentifier</code>è¿™äº›éªŒè¯æ–¹æ³•çš„å‘¢ï¼Œæ‰€æœ‰çš„èŠ‚ç‚¹ç±»å‹åœ¨ <em><a href="https://babeljs.io/docs/en/babel-types" target="_blank" rel="noopener">@babel/types</a></em> ï¼Œåœ¨è¿™é‡Œä¹Ÿå®šä¹‰äº† å¯¹åº”èŠ‚ç‚¹çš„éªŒè¯å‡½æ•° isXxxx ã€‚è¿™é‡Œæ˜¯éªŒè¯å‡½æ•°çš„æºç ï¼š<a href="https://github.com/babel/babel/blob/master/packages/babel-types/src/validators/generated/index.js" target="_blank" rel="noopener">source code</a>ã€‚</p>
</blockquote>
<p><a name="V0S6X"></a></p>
<h4 id="è½¬æ¢å­—ç¬¦ä¸²"><a href="#è½¬æ¢å­—ç¬¦ä¸²" class="headerlink" title="è½¬æ¢å­—ç¬¦ä¸²"></a><a href="https://lihautan.com/step-by-step-guide-for-writing-a-babel-transformation/#transforming-strings" target="_blank" rel="noopener">è½¬æ¢å­—ç¬¦ä¸²</a></h4><p>ä¸‹ä¸€æ­¥æ˜¯åœ¨ StringLiteral ä¸­ç”ŸæˆåµŒå¥—çš„ BinaryExpressionã€‚<br>è‹¥è¦åˆ›å»º AST èŠ‚ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ @babel/types ä¸­çš„å®ç”¨ç¨‹åºåŠŸèƒ½ã€‚ä¹Ÿå¯ä»¥é€šè¿‡ @babel/core çš„ babel.types è·å¾— @babel/typesã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">StringLiteral(path) &#123;</span><br><span class="line">  <span class="keyword">const</span> newNode = path.node.value</span><br><span class="line">    .split(<span class="string">''</span>)</span><br><span class="line">    .map(<span class="function"><span class="params">c</span> =&gt;</span> babel.types.stringLiteral(c))</span><br><span class="line">    .reduce(<span class="function">(<span class="params">prev, curr</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> babel.types.binaryExpression(<span class="string">'+'</span>, prev, curr);</span><br><span class="line">    &#125;);</span><br><span class="line">  path.replaceWith(newNode);</span><br><span class="line">  path.skip(); ã€<span class="comment">// è·³è¿‡éå†å½“å‰è·¯å¾„çš„å­èŠ‚ç‚¹ï¼Œä¸ç„¶ä¼šå‘ç”Ÿæ ˆæº¢å‡º</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åˆ†å‰²äº† StringLiteral çš„å†…å®¹ï¼ˆä½äº path.node.value ä¸­ï¼‰ï¼Œä½¿æ¯ä¸ªå­—ç¬¦æˆä¸º StringLiteralï¼Œç„¶åå°†å®ƒä»¬ä¸ BinaryExpression ç»“åˆåœ¨ä¸€èµ·ã€‚æœ€åï¼Œæˆ‘ä»¬ç”¨æ–°åˆ›å»ºçš„èŠ‚ç‚¹æ›¿æ¢ StringLiteralã€‚<br></p>
<p><a name="Z24HP"></a></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><a href="https://lihautan.com/step-by-step-guide-for-writing-a-babel-transformation/#summary" target="_blank" rel="noopener">æ€»ç»“</a></h2><p><br>ä¸‹é¢æ˜¯æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªåŸºäº babel çš„ä»£ç è½¬æ¢ï¼š<br></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> babel = <span class="built_in">require</span>(<span class="string">'@babel/core'</span>);</span><br><span class="line"><span class="keyword">const</span> code = <span class="string">`</span></span><br><span class="line"><span class="string">function greet(name) &#123;</span></span><br><span class="line"><span class="string">  return 'Hello ' + name;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">console.log(greet('tanhauhau')); // Hello tanhauhau</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"><span class="keyword">const</span> output = babel.transformSync(code, &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">myCustomPlugin</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        visitor: &#123;</span><br><span class="line">          StringLiteral(path) &#123;</span><br><span class="line">            <span class="keyword">const</span> concat = path.node.value</span><br><span class="line">              .split(<span class="string">''</span>)</span><br><span class="line">              .map(<span class="function">(<span class="params">c</span>) =&gt;</span> babel.types.stringLiteral(c))</span><br><span class="line">              .reduce(<span class="function">(<span class="params">prev, curr</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> babel.types.binaryExpression(<span class="string">'+'</span>, prev, curr);</span><br><span class="line">              &#125;);</span><br><span class="line">            path.replaceWith(concat);</span><br><span class="line">            path.skip();</span><br><span class="line">          &#125;,</span><br><span class="line">          Identifier(path) &#123;</span><br><span class="line">            <span class="keyword">if</span> (</span><br><span class="line">              !(</span><br><span class="line">                path.parentPath.isMemberExpression() &amp;&amp;</span><br><span class="line">                path.parentPath</span><br><span class="line">                  .get(<span class="string">'object'</span>)</span><br><span class="line">                  .isIdentifier(&#123; <span class="attr">name</span>: <span class="string">'console'</span> &#125;) &amp;&amp;</span><br><span class="line">                path.parentPath.get(<span class="string">'property'</span>).isIdentifier(&#123; <span class="attr">name</span>: <span class="string">'log'</span> &#125;)</span><br><span class="line">              )</span><br><span class="line">            ) &#123;</span><br><span class="line">              path.node.name = path.node.name.split(<span class="string">''</span>).reverse().join(<span class="string">''</span>);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(output.code);</span><br></pre></td></tr></table></figure>
<p>å†æ¬¡æƒ é¡¾ä¸‹æˆ‘ä»¬çš„å®Œæˆçš„æ­¥éª¤æ˜¯ï¼š</p>
<ol>
<li>ä»å“ªé‡Œæ¥åˆ°å“ªé‡Œå»ï¼šè®°ä½è¦è½¬æ¢çš„å†…å®¹å’Œç›®æ ‡</li>
<li>ASTï¼šæ˜ç™½ AST ä»£ç </li>
<li>ASTï¼šæ˜ç™½è½¬æ¢åçš„ AST çš„ä»£ç </li>
<li>å†™ä»£ç ï¼šé€šè¿‡ babel å®ç°è½¬æ¢ä»£ç </li>
</ol>
<p><a name="lBGGL"></a></p>
<h2 id="æ›´å¤šèµ„æº"><a href="#æ›´å¤šèµ„æº" class="headerlink" title="æ›´å¤šèµ„æº"></a><a href="https://lihautan.com/step-by-step-guide-for-writing-a-babel-transformation/#further-resources" target="_blank" rel="noopener">æ›´å¤šèµ„æº</a></h2><p><a href="https://github.com/babel/babel/tree/master/packages" target="_blank" rel="noopener">babel github repo</a> ï¼šè¿™é‡Œæœ‰å¾ˆå¤šä»£ç æ¡ˆä¾‹ï¼Œ<code>babel-plugin-transform-*</code> or <code>babel-plugin-proposal-\* `</code>æ–‡ä»¶å¤¹ä¸‹é¢æœ‰å¾ˆå¤š transformation plugin å¯ä¾›å­¦ä¹ å‚è€ƒã€‚<br></p>
<p><a name="YahZt"></a></p>
<h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a><a href="https://lihautan.com/step-by-step-guide-for-writing-a-babel-transformation/#reference" target="_blank" rel="noopener">å¼•ç”¨</a></h2><ul>
<li><a href="https://babeljs.io/docs/en/" target="_blank" rel="noopener">Babel docs</a> &amp; <a href="https://github.com/babel/babel" target="_blank" rel="noopener">Github repo</a></li>
<li><a href="https://github.com/jamiebuilds/babel-handbook" target="_blank" rel="noopener">Babel Handbook</a> by <a href="https://jamie.build/" target="_blank" rel="noopener">Jamie Kyle</a></li>
<li><a href="https://medium.com/basecs/leveling-up-ones-parsing-game-with-asts-d7a6fc2400ff" target="_blank" rel="noopener">Leveling Up Oneâ€™s Parsing Game With ASTs</a> by <a href="https://twitter.com/vaidehijoshi" target="_blank" rel="noopener">Vaidehi Joshi</a></li>
<li><a href="https://lihautan.com/step-by-step-guide-for-writing-a-babel-transformation/" target="_blank" rel="noopener">step-by-step-guide-for-writing-a-babel-transformation</a><br></li>
</ul>

        </div>
        <footer class="article-footer">
            


    <div class="a2a_kit a2a_default_style">
    <a class="a2a_dd" href="https://www.addtoany.com/share">Share</a>
    <span class="a2a_divider"></span>
    <a class="a2a_button_facebook"></a>
    <a class="a2a_button_twitter"></a>
    <a class="a2a_button_google_plus"></a>
    <a class="a2a_button_pinterest"></a>
    <a class="a2a_button_tumblr"></a>
</div>
<script type="text/javascript" src="//static.addtoany.com/menu/page.js"></script>
<style>
    .a2a_menu {
        border-radius: 4px;
    }
    .a2a_menu a {
        margin: 2px 0;
        font-size: 14px;
        line-height: 16px;
        border-radius: 4px;
        color: inherit !important;
        font-family: 'Microsoft Yahei';
    }
    #a2apage_dropdown {
        margin: 10px 0;
    }
    .a2a_mini_services {
        padding: 10px;
    }
    a.a2a_i,
    i.a2a_i {
        width: 122px;
        line-height: 16px;
    }
    a.a2a_i .a2a_svg,
    a.a2a_more .a2a_svg {
        width: 16px;
        height: 16px;
        line-height: 16px;
        vertical-align: top;
        background-size: 16px;
    }
    a.a2a_i {
        border: none !important;
    }
    a.a2a_menu_show_more_less {
        margin: 0;
        padding: 10px 0;
        line-height: 16px;
    }
    .a2a_mini_services:after{content:".";display:block;height:0;clear:both;visibility:hidden}
    .a2a_mini_services{*+height:1%;}
</style>


        </footer>
    </div>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "author": {
            "@type": "Person",
            "name": "ç¨‹åº·å¥"
        },
        "headline": "å¦‚ä½•å†™ä¸€ä¸ª babel pluginã€ç¿»è¯‘ã€‘",
        "image": "http://www.chengkangjian.comhttps://ckj-bucket.oss-cn-beijing.aliyuncs.com/chengkj-blog/tree.jpg",
        "keywords": "æŠ€æœ¯",
        "genre": "æŠ€æœ¯",
        "datePublished": "2020-10-23",
        "dateCreated": "2020-10-23",
        "dateModified": "2020-10-23",
        "url": "http://www.chengkangjian.com/2020/10/23/How-to-write-a-babel-plugin/",
        "description": "

ä»€ä¹ˆæ˜¯ babelbabel æ˜¯ javascript ç¼–è¯‘å™¨ï¼Œå®ƒå¯ä»¥å°† ECMAScript 2015+ ä»£ç è½¬æ¢æˆæµè§ˆå™¨å¯è§£æçš„å…¼å®¹æ€§ä»£ç ã€‚
babel æ˜¯åŸºäº plugin system  è¿›è¡Œä»£ç è½¬æ¢çš„ï¼Œé€šè¿‡ babel æ¯ä¸ªäººéƒ½å¯ä»¥å†™è‡ªå·±çš„ babel pluginã€‚

ä»€ä¹ˆæ˜¯æŠ½è±¡è¯­æ³•æ ‘ Abstract Syntax Tree (AST)AST (Abstract syntax t"
        "wordCount": 2011
    }
</script>

</article>

    <section id="comments">
    
        
    <div id="valine-thread"></div>


    
    
    <div id="valine-thread"></div>


    </section>



                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>å…³æ³¨æˆ‘ :</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="hexo" href="https://www.zhihu.com/people/chengkj" target="_blank" rel="noopener">
                        <i class="icon fa fa-hexo"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/chengkj99" target="_blank" rel="noopener">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="weibo" href="http://weibo.com/chengkangjian" target="_blank" rel="noopener">
                        <i class="icon fa fa-weibo"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="linkedin" href="https://www.linkedin.com/in/chengkangjian" target="_blank" rel="noopener">
                        <i class="icon fa fa-linkedin"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="weixin" href="http://ckj-bucket.oss-cn-beijing.aliyuncs.com/chengkj-blog/WechatIMG211.jpeg" target="_blank" rel="noopener">
                        <i class="icon fa fa-weixin"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
    
        <a href="/2020/03/27/docker-use/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
        <p class="article-nav-title">Ionic é¡¹ç›® APK æ‰“åŒ…å®¹å™¨åŒ–éƒ¨ç½²å®è·µ</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                

            
                
    <div class="widget-wrap">
        <h3 class="widget-title">æœ€æ–°æ–‡ç« </h3>
        <div class="widget">
            <ul id="recent-post" class>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/10/23/How-to-write-a-babel-plugin/" class="thumbnail">
    
    
        <span style="background-image:url(https://ckj-bucket.oss-cn-beijing.aliyuncs.com/chengkj-blog/tree.jpg)" alt="å¦‚ä½•å†™ä¸€ä¸ª babel pluginã€ç¿»è¯‘ã€‘" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/æŠ€æœ¯/">æŠ€æœ¯</a></p>
                            <p class="item-title"><a href="/2020/10/23/How-to-write-a-babel-plugin/" class="title">å¦‚ä½•å†™ä¸€ä¸ª babel pluginã€ç¿»è¯‘ã€‘</a></p>
                            <p class="item-date"><time datetime="2020-10-23T09:28:42.000Z" itemprop="datePublished">2020-10-23</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/03/27/docker-use/" class="thumbnail">
    
    
        <span style="background-image:url(https://ckj-bucket.oss-cn-beijing.aliyuncs.com/chengkj-blog/bank.jpg)" alt="Ionic é¡¹ç›® APK æ‰“åŒ…å®¹å™¨åŒ–éƒ¨ç½²å®è·µ" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/å·¥ä½œ/">å·¥ä½œ</a></p>
                            <p class="item-title"><a href="/2020/03/27/docker-use/" class="title">Ionic é¡¹ç›® APK æ‰“åŒ…å®¹å™¨åŒ–éƒ¨ç½²å®è·µ</a></p>
                            <p class="item-date"><time datetime="2020-03-27T03:11:09.000Z" itemprop="datePublished">2020-03-27</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/01/09/DI-IOC/" class="thumbnail">
    
    
        <span style="background-image:url(https://ckj-bucket.oss-cn-beijing.aliyuncs.com/chengkj-blog/fountain.jpg)" alt="ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰å’Œæ§åˆ¶åè½¬ï¼ˆIOCï¼‰" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/æŠ€æœ¯/">æŠ€æœ¯</a></p>
                            <p class="item-title"><a href="/2020/01/09/DI-IOC/" class="title">ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰å’Œæ§åˆ¶åè½¬ï¼ˆIOCï¼‰</a></p>
                            <p class="item-date"><time datetime="2020-01-09T08:42:34.000Z" itemprop="datePublished">2020-01-09</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/01/02/2020-new-year-speech/" class="thumbnail">
    
    
        <span style="background-image:url(https://ckj-bucket.oss-cn-beijing.aliyuncs.com/chengkj-blog/fireworks.jpg)" alt="è®°ã€Šæ—¶é—´çš„æœ‹å‹ã€‹è·¨å¹´æ¼”è®²ä¸»è¦å›ç­”çš„å‡ ä¸ªé—®é¢˜" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/æƒ³æ³•/">æƒ³æ³•</a></p>
                            <p class="item-title"><a href="/2020/01/02/2020-new-year-speech/" class="title">è®°ã€Šæ—¶é—´çš„æœ‹å‹ã€‹è·¨å¹´æ¼”è®²ä¸»è¦å›ç­”çš„å‡ ä¸ªé—®é¢˜</a></p>
                            <p class="item-date"><time datetime="2020-01-02T08:25:58.000Z" itemprop="datePublished">2020-01-02</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2019/12/28/use-vim/" class="thumbnail">
    
    
        <span style="background-image:url(https://ckj-bucket.oss-cn-beijing.aliyuncs.com/chengkj-blog/nature-vim.jpg)" alt="vim åŸºç¡€æ•™ç¨‹" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/æŠ€æœ¯/">æŠ€æœ¯</a></p>
                            <p class="item-title"><a href="/2019/12/28/use-vim/" class="title">vim åŸºç¡€æ•™ç¨‹</a></p>
                            <p class="item-date"><time datetime="2019-12-28T07:51:24.000Z" itemprop="datePublished">2019-12-28</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">åˆ†ç±»</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/å·¥ä½œ/">å·¥ä½œ</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/æƒ³æ³•/">æƒ³æ³•</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯/">æŠ€æœ¯</a><span class="category-list-count">29</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ç”Ÿæ´»/">ç”Ÿæ´»</a><span class="category-list-count">19</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">å½’æ¡£</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">åæœˆ 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">ä¸‰æœˆ 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">ä¸€æœˆ 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">åäºŒæœˆ 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">åä¸€æœˆ 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">ä¹æœˆ 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">ä¸ƒæœˆ 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">å…­æœˆ 2019</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">äº”æœˆ 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">å››æœˆ 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">ä¸‰æœˆ 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">åä¸€æœˆ 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">ä¸‰æœˆ 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">ä¸€æœˆ 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">åäºŒæœˆ 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">ä¹æœˆ 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">å…«æœˆ 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">å…­æœˆ 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">äº”æœˆ 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">å››æœˆ 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">ä¸‰æœˆ 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">äºŒæœˆ 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">åæœˆ 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">ä¹æœˆ 2016</a><span class="archive-list-count">4</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">æ ‡ç­¾</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CDN/">CDN</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FE/">FE</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/">vue</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/äº’è”ç½‘/">äº’è”ç½‘</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å­¦ä¹ /">å­¦ä¹ </a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å¯†ç ç®¡ç†/">å¯†ç ç®¡ç†</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å¯¹è±¡/">å¯¹è±¡</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å¿ƒæƒ…/">å¿ƒæƒ…</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ€è€ƒ/">æ€è€ƒ</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æƒ³æ³•-ç”Ÿæ´»-æŠ€æœ¯/">æƒ³æ³• ç”Ÿæ´» æŠ€æœ¯</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ„Ÿæ‚Ÿ/">æ„Ÿæ‚Ÿ</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æˆé•¿/">æˆé•¿</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æˆ‘/">æˆ‘</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æŠ€æœ¯/">æŠ€æœ¯</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ•æ·å¼€å‘/">æ•æ·å¼€å‘</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ•°ç»„/">æ•°ç»„</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç”Ÿæ´»/">ç”Ÿæ´»</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç®—æ³•/">ç®—æ³•</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/è®°å½•/">è®°å½•</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/è°ƒç ”/">è°ƒç ”</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/é€‰æ‹©/">é€‰æ‹©</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/é˜…è¯»/">é˜…è¯»</a><span class="tag-list-count">2</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">æ ‡ç­¾äº‘</h3>
        <div class="widget tagcloud">
            <a href="/tags/CDN/" style="font-size: 14.29px;">CDN</a> <a href="/tags/FE/" style="font-size: 10px;">FE</a> <a href="/tags/git/" style="font-size: 11.43px;">git</a> <a href="/tags/javascript/" style="font-size: 17.14px;">javascript</a> <a href="/tags/vue/" style="font-size: 14.29px;">vue</a> <a href="/tags/webpack/" style="font-size: 11.43px;">webpack</a> <a href="/tags/äº’è”ç½‘/" style="font-size: 10px;">äº’è”ç½‘</a> <a href="/tags/å­¦ä¹ /" style="font-size: 14.29px;">å­¦ä¹ </a> <a href="/tags/å¯†ç ç®¡ç†/" style="font-size: 10px;">å¯†ç ç®¡ç†</a> <a href="/tags/å¯¹è±¡/" style="font-size: 10px;">å¯¹è±¡</a> <a href="/tags/å¿ƒæƒ…/" style="font-size: 12.86px;">å¿ƒæƒ…</a> <a href="/tags/æ€è€ƒ/" style="font-size: 20px;">æ€è€ƒ</a> <a href="/tags/æƒ³æ³•-ç”Ÿæ´»-æŠ€æœ¯/" style="font-size: 10px;">æƒ³æ³• ç”Ÿæ´» æŠ€æœ¯</a> <a href="/tags/æ„Ÿæ‚Ÿ/" style="font-size: 14.29px;">æ„Ÿæ‚Ÿ</a> <a href="/tags/æˆé•¿/" style="font-size: 18.57px;">æˆé•¿</a> <a href="/tags/æˆ‘/" style="font-size: 11.43px;">æˆ‘</a> <a href="/tags/æŠ€æœ¯/" style="font-size: 14.29px;">æŠ€æœ¯</a> <a href="/tags/æ•æ·å¼€å‘/" style="font-size: 10px;">æ•æ·å¼€å‘</a> <a href="/tags/æ•°ç»„/" style="font-size: 10px;">æ•°ç»„</a> <a href="/tags/ç”Ÿæ´»/" style="font-size: 15.71px;">ç”Ÿæ´»</a> <a href="/tags/ç®—æ³•/" style="font-size: 18.57px;">ç®—æ³•</a> <a href="/tags/è®°å½•/" style="font-size: 10px;">è®°å½•</a> <a href="/tags/è°ƒç ”/" style="font-size: 10px;">è°ƒç ”</a> <a href="/tags/é€‰æ‹©/" style="font-size: 10px;">é€‰æ‹©</a> <a href="/tags/é˜…è¯»/" style="font-size: 11.43px;">é˜…è¯»</a>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">é“¾æ¥</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://chengkangjian.lofter.com/">Lofter Blog</a>
                    </li>
                
            </ul>
        </div>
    </div>


            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2020 ç¨‹åº·å¥</p>
                <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p>
            </div>
            <div class="footer-plugins">
              
    


            </div>
        </div>
        <div style="position: absolute; bottom: 0; right: 0;">
            <span id="busuanzi_container_site_pv">
                æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡
            </span>
            <span id="busuanzi_container_site_uv">
                æœ¬ç«™è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>äººæ¬¡
              </span>
        </div>
    </div>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</footer>

        
    
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
    <script>
        console.log('UUUUUUUUUUUUUUUUUUUUUU', Valine)
        new Valine({
            el: '#valine-thread' ,
            notify:false,
            verify:false,
            app_id: 'F6jFQaG21HE6wUeYaXTSccnG-gzGzoHsz',
            app_key: 'xvsqUs1Nt3LtHilVGzspzqvk',
            placeholder: 'å‘è¡¨è¯„è®º~',
            pageSize: '10',
            avatar: 'identicon',
            avatar_cdn:  'https://gravatar.loli.net/avatar/'
        });
    </script>





    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>
